#!/usr/bin/env bash

earliest=4753930
latest=5163092
step=${2:-50}
start=`date +%s`

while [ $latest -ge $earliest ]; do
  from=$(($latest-$step))
  to=$(($latest))
  echo "Syncing $from - $to"
  export FROM_BLOCK=$from
  export TO_BLOCK=$to
  node_modules/.bin/babel-node libexec/$1
  latest=$from
done

end=`date +%s`
runtime=$((end-start))
echo "Completed in $runtime seconds"
